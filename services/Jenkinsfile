pipeline  {  
agent any  
    stages  {
         stage('Clone sources')  {
             steps  {
                script {
                	def filelist = getChangedFilesList()
                	echo "${filelist}"
                }
            }
        }
    }
}
@NonCPS

def getChangedFilesList() {
       changedFiles = []
       for (changeLogSet in currentBuild.changeSets) {
            for (entry in changeLogSet.getItems()) { // for each commit in the detected changes
                for (file in entry.getAffectedFiles()) {
                    changedFiles.add(file.getPath()) // add changed file to list
                }
           }
       }
   return changedFiles
}
